<div class="user-login-container">
  <div class="login-card">
    <button class="back-btn" (click)="goBack()">
      <span class="back-icon">←</span> Back to Home
    </button>
    
    <div class="header-section">
      <div class="user-icon-wrapper">
        <svg class="user-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" fill="currentColor"/>
        </svg>
      </div>
      <h1>User Portal</h1>
      <p class="subtitle">Access your library account</p>
    </div>
    
    <div class="mode-toggle">
      <button 
        [class.active]="isExistingUser" 
        (click)="toggleMode()"
        class="toggle-btn"
      >
        <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M18 8H20C21.1 8 22 8.9 22 10V20C22 21.1 21.1 22 20 22H4C2.9 22 2 21.1 2 20V10C2 8.9 2.9 8 4 8H6V6C6 3.79 7.79 2 10 2H14C16.21 2 18 3.79 18 6V8ZM16 8V6C16 4.9 15.1 4 14 4H10C8.9 4 8 4.9 8 6V8H16ZM4 10V20H20V10H4Z" fill="currentColor"/>
        </svg>
        Existing User
      </button>
      <button 
        [class.active]="!isExistingUser" 
        (click)="toggleMode()"
        class="toggle-btn"
      >
        <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 13H13V19H11V13H5V11H11V5H13V11H19V13Z" fill="currentColor"/>
        </svg>
        Create New User
      </button>
    </div>

    <!-- Existing User Login -->
    <form *ngIf="isExistingUser" (ngSubmit)="login()" class="login-form">
      <div class="form-group">
        <label for="email">
          <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z" fill="currentColor"/>
          </svg>
          Email Address
        </label>
        <input 
          type="email" 
          id="email" 
          [(ngModel)]="email" 
          name="email" 
          placeholder="user@example.com"
          required
        >
      </div>
      
      <div class="form-group">
        <label for="password">
          <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 8H17V6C17 3.24 14.76 1 12 1S7 3.24 7 6V8H6C4.9 8 4 8.9 4 10V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V10C20 8.9 19.1 8 18 8ZM9 6C9 4.34 10.34 3 12 3S15 4.34 15 6V8H9V6ZM18 20H6V10H18V20Z" fill="currentColor"/>
          </svg>
          Password
        </label>
        <input 
          type="password" 
          id="password" 
          [(ngModel)]="password" 
          name="password" 
          placeholder="Enter your password"
          required
        >
      </div>
      
      <div class="error-message" *ngIf="errorMessage">
        <svg class="error-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
        </svg>
        {{ errorMessage }}
      </div>
      
      <button type="submit" class="login-btn">
        <span>Login to Account</span>
        <span class="btn-arrow">→</span>
      </button>
    </form>

    <!-- Create New User -->
    <form *ngIf="!isExistingUser" (ngSubmit)="register()" class="login-form">
      <div class="form-group">
        <label for="newName">
          <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" fill="currentColor"/>
          </svg>
          Full Name
        </label>
        <input 
          type="text" 
          id="newName" 
          [(ngModel)]="newName" 
          name="newName" 
          placeholder="Enter your full name"
          required
        >
      </div>
      
      <div class="form-group">
        <label for="newEmail">
          <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 4H4C2.9 4 2.01 4.9 2.01 6L2 18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V6C22 4.9 21.1 4 20 4ZM20 8L12 13L4 8V6L12 11L20 6V8Z" fill="currentColor"/>
          </svg>
          Email Address
        </label>
        <input 
          type="email" 
          id="newEmail" 
          [(ngModel)]="newEmail" 
          name="newEmail" 
          placeholder="user@example.com"
          required
        >
      </div>
      
      <div class="form-group">
        <label for="newPassword">
          <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 8H17V6C17 3.24 14.76 1 12 1S7 3.24 7 6V8H6C4.9 8 4 8.9 4 10V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V10C20 8.9 19.1 8 18 8ZM9 6C9 4.34 10.34 3 12 3S15 4.34 15 6V8H9V6ZM18 20H6V10H18V20Z" fill="currentColor"/>
          </svg>
          Password
        </label>
        <input 
          type="password" 
          id="newPassword" 
          [(ngModel)]="newPassword" 
          name="newPassword" 
          placeholder="Create a password (min 6 characters)"
          required
        >
      </div>
      
      <div class="form-group">
        <label for="confirmPassword">
          <svg class="label-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 8H17V6C17 3.24 14.76 1 12 1S7 3.24 7 6V8H6C4.9 8 4 8.9 4 10V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V10C20 8.9 19.1 8 18 8ZM9 6C9 4.34 10.34 3 12 3S15 4.34 15 6V8H9V6ZM18 20H6V10H18V20Z" fill="currentColor"/>
          </svg>
          Confirm Password
        </label>
        <input 
          type="password" 
          id="confirmPassword" 
          [(ngModel)]="confirmPassword" 
          name="confirmPassword" 
          placeholder="Confirm your password"
          required
        >
      </div>
      
      <div class="error-message" *ngIf="errorMessage">
        <svg class="error-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z" fill="currentColor"/>
        </svg>
        {{ errorMessage }}
      </div>
      
      <div class="success-message" *ngIf="successMessage">
        <svg class="success-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z" fill="currentColor"/>
        </svg>
        {{ successMessage }}
      </div>
      
      <button type="submit" class="login-btn">
        <span>Create Account</span>
        <span class="btn-arrow">→</span>
      </button>
    </form>
  </div>
</div>

